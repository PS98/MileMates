!function(t,e,s,i){"use strict";var a,o="jelect",n="plugin_"+o,l={wrapper:".jelect",input:".jelect-input",current:".jelect-current",optionsWrapper:".jelect-options",option:".jelect-option",activeClass:"jelect_state_active",optionsWrapperActiveClass:"jelect-options_state_active",optionActiveClass:"jelect-option_state_active"};a=function(e,s){this.element=e,this.$element=t(e),this.options=t.extend(l,s),this._defaults=l,this.init()},a.prototype={init:function(e){var i=this,a=t.extend(i.options,e),o=i.$element,n=t(a.optionsWrapper);o.children(a.current).on("click.jelectCurrentClick",function(){var e=t(this),s=e.closest(a.wrapper),i=e.siblings(a.optionsWrapper);i.toggleClass(a.optionsWrapperActiveClass),n.filter(":visible").not(i).removeClass(a.optionsWrapperActiveClass),s.toggleClass(a.activeClass),o.not(s).removeClass(a.activeClass)}).siblings(a.optionsWrapper).on("click.jelectOptionClick",a.option,function(){var e=t(this),s=(e.data("val"),e.text());e.addClass(a.optionActiveClass).siblings().removeClass(a.optionActiveClass).closest(a.optionsWrapper).removeClass(a.optionsWrapperActiveClass).closest(a.wrapper).removeClass(a.activeClass).children(a.current).text(s).attr("data-old",e.closest(a.optionsWrapper).siblings(a.input).attr("data-text")).siblings(a.input).val(s).attr("data-text",s).trigger("change")}),t(s).on("click.jelectOutsideClick",function(e){var s=t(e.target);s.is(a.wrapper)||s.closest(a.wrapper).length||!n.filter(":visible").length||n.removeClass(a.optionsWrapperActiveClass).closest(a.wrapper).removeClass(a.activeClass)})},destroy:function(){this.$element.data(n,null)},setValue:function(t,e){var s=e,i=s.parent().siblings(".jelect-input").text()?s.parent().siblings(".jelect-input").text():t;s.addClass("jelect-option_state_active").siblings().removeClass("jelect-option_state_active").closest(".jelect-options").removeClass("jelect-options_state_active").closest(".jelect").removeClass("jelect_state_active").children(".jelect-current").text(t).siblings(".jelect-input").attr("data-old",i).val(t).attr("data-text",t)}},t.fn[o]=function(e){return this.each(function(){t(this).data(n)||t(this).data(n,new a(this,e))})},t.fn.setJelect=function(e){var s=t(this).siblings().find(".jelect-option"),i=s.length;s.each(function(o){return t(this).text()&&e&&t(this).text().toLowerCase()===e.toLowerCase()?(a.prototype.setValue(e,t(this)),void(i=0)):o===i-1?void a.prototype.setValue(s.first().text(),s.first()):void 0})}}(jQuery,window,document);